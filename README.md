# salary_calc_pet
Юстори
На конец года компания решила выплатить всем премии и автоматизировать их расчет и отправку поздравительных писем. Ты часть большой команды и тебе надо решить эту задачу.

Данные для расчета премии готовят кадры, в ручную, и скидывают в специальную сетевую папку в csv формате. Загрузку расчетов премии и отправкой писем занимается сервис из другой команды.
Кадры могут скидывать сколько угодно файлов, так как подготовка данных для премии динамический рабочий процесс.

Твоя задача написать сервис, который будет мониторить папку на наличие новых файлов для расчета премии, читать их, проводить расчеты и скидывать результаты в директорию, с которой результаты будет забирать смежный сервис.
Если в результате чтения окажется, что формат, макет файла или данные для расчета содержат косяки, то нужно скидывать в отдельную папку txt файлы, в которых будут перечислены все выявленные ошибки в понятном для кадров формате, для исправления.

Все обработанные файлы удаляются из директории и перекладываются в папку для обработанных данных.

Тех задание.
Файл расчета:
1.	Формат файла для расчета – csv, расширение – csv, разделитель – “;”, кодировка- UTF8
2.	Файл содержит заголовок первой строкой;
3.	Поля в файле, в заданном порядке:
1.	ID
2.	ФИО
3.	Пол
4.	Дата приема на работу (в формате YYYY-MM-DD)
5.	Дата увольнения (в формате YYYY-MM-DD) (допускается пустое поле)
6.	ЗП за год (в рублях)
7.	Грейд сотрудника от 1 до 20.
8.	Оценка работника (от нуля до 5)
9.	Сколько дней сотрудник не работал в году (от 0 до 365)
10.	ID сотрудника который является супругом(ой) работнику. Если данное поле заполнено, то супруг обязательно должен находится в файле, и иметь обратную ссылку по id. Если супруга нет, пустое поле. У сотрудника может быть только один супруг.
4.	Расчет премии по сотруднику определяется по следующей форме:
Если сотрудник уволен – премия не выплачивается
Общая сумма премии: 
K1 = MAX((((31.12.2023 - Max(01.01.2023, Дата устройства)).дней – 100 – количество не рабочих сотрудником дней) / 260), 0)
K2 = Грейд/10
K3 = Оценка/2
Премия = ЗП * K1 *K2 * K3 * 0,3
5.	Компания любит чтобы в ней работали супруги. Поэтому платит сотруднику 5% от ЗП супруга. Но при условии, если и работник, и супруг работал на конец года.
Все обработанные файлы переносятся в спец директорию со сменой имени:
1.	Если обработка прошла без ошибок – “OK_<TIMESTAMP>_<имя файла>»
2.	Есть ошибки – «ERROR_<TIMESTAMP>_<имя файла>»
Требования к файлу ошибок:
3.	Название – “ERR_<имя файла>.txt”, по которому выявлены ошибки.
4.	Выявленные ошибки выделяются 3 отступами;
5.	Требований к тексту ошибок нет, но по ним сотрудник должен понять, как он может исправить ошибку (например, ID сотрудника, не указана дата устройства и тп);
По каждому успешно посчитанному ID работника, кроме уволенных, нужно создать JSON файл, и переложить в папку для смежного сервиса.
Схема JSON:
{“ID”: <id Сотрудника>, “Bonus”: <премия сотрудника>, “SPOUSE_BONUSE”: <премия за супруга, если есть> }
Требования к названию файла: <ID сотрудника>_<TIMESTAMP>.json

Пути:
\\Bonuses – директория для получения файлов с расчетом премии;
\\Bonuses\checked - директория для переноса обработанных файлов;
\\Bonuses\error - директория для файлов с описанием ошибки;
\\Bonuses\result - директория с json файлами – результатами расчетов

Доп. Задание – подготовить тестовые файлы для тестирования сервиса (со всеми видами ошибок, файл без ошибок).
